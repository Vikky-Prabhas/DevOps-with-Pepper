:root{
  /* Light */
  --bg-light:#f5f5f7;
  --card-light:#ffffff;
  --text-light:#1d1d1f;
  --muted-light:#6e6e73;
  --border-light:#e5e5ea;
  --accent-light:#65b2ff;

  /* Dark */
  --bg-dark:#000000;
  --card-dark:#1c1c1e;
  --text-dark:#f5f5f7;
  --muted-dark:#a1a1a6;
  --border-dark:#2c2c2e;
  --accent-dark:#4fa7ff;

  /* Shared */
  --radius:14px;
  --shadow:0 10px 28px rgba(0,0,0,.18), 0 2px 10px rgba(0,0,0,.12);
  --font:-apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", Inter, "Segoe UI", Roboto, Helvetica, Arial, system-ui, sans-serif;
  --max:1180px;
}

/* Base + theme */
*{ box-sizing:border-box; min-width:0 }
html,body{ margin:0; padding:0 }
body{
  font-family:var(--font); line-height:1.6;
  background:var(--bg-dark); color:var(--text-dark);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  transition:background .3s ease, color .3s ease;
}
body.light{ background:var(--bg-light); color:var(--text-light) }
a{ color:var(--accent-dark); text-decoration:none }
body.light a{ color:var(--accent-light) }
a:focus-visible, button:focus-visible, input:focus-visible, select:focus-visible { 
  outline:3px solid color-mix(in oklab, currentColor 35%, transparent); 
  outline-offset:2px; 
  border-radius:8px 
}

/* Header */
.site-header{
  position:sticky; top:0; z-index:50;
  backdrop-filter:saturate(140%) blur(12px); -webkit-backdrop-filter:saturate(140%) blur(12px);
  background:color-mix(in oklab, #000 70%, transparent);
  border-bottom:1px solid var(--border-dark);
}
body.light .site-header{
  background:color-mix(in oklab, #fff 82%, transparent);
  border-bottom:1px solid var(--border-light);
}
.header-inner{
  max-width:var(--max); margin:0 auto; padding:14px 16px;
  display:flex; align-items:center; gap:12px; justify-content:space-between;
}
.brand{
  display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:-.02em;
}
.brand .dot{
  width:10px; height:10px; border-radius:999px;
  background:linear-gradient(135deg, #0a84ff, #34c759);
  box-shadow:0 0 16px rgba(52,199,89,.6);
}
.brand .title{ font-size:clamp(18px,2.8vw,22px) }
.header-actions{ display:flex; align-items:center; gap:10px }
.search{
  position:relative;
  display:flex; align-items:center; gap:8px;
  border:1px solid var(--border-dark); border-radius:10px;
  padding:8px 10px; background:var(--card-dark); color:inherit; min-width:220px;
}
.search input{
  border:0; outline:0; background:transparent; color:inherit; width:180px;
  font: inherit; font-size:14px;
}
body.light .search{ background:var(--card-light); border-color:var(--border-light) }
.theme-toggle{
  border:1px solid var(--border-dark); background:var(--card-dark); color:inherit;
  padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:600;
  transition:transform .15s ease, box-shadow .2s ease;
}
.theme-toggle:hover{ transform:translateY(-2px); box-shadow:var(--shadow) }
body.light .theme-toggle{ border-color:var(--border-light); background:var(--card-light) }

/* Page intro */
.hero{ max-width:var(--max); margin:18px auto 8px; padding:0 16px }
.hero h1{ margin:0; font-size:clamp(26px,3.6vw,38px); letter-spacing:-.02em }
.hero p{ margin:6px 0 0; color:var(--muted-dark) }
body.light .hero p{ color:var(--muted-light) }

/* Filter controls */
.filter-controls-wrapper {
  max-width: var(--max);
  margin: 24px auto 10px;
  padding: 0 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}
.filter-group {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  align-items: center;
}
.filter-group-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--muted-dark);
  margin-right: 6px;
}
body.light .filter-group-label { color: var(--muted-light); }

.filter-btn {
  border: 1px solid var(--border-dark);
  background: transparent;
  color: var(--muted-dark);
  padding: 6px 14px;
  border-radius: 999px;
  cursor: pointer;
  font-weight: 600;
  font-size: 13px;
  transition: all .2s ease;
  text-transform: capitalize;
}
body.light .filter-btn {
  border-color: var(--border-light);
  color: var(--muted-light);
}
.filter-btn:hover {
  border-color: var(--accent-dark);
  color: var(--accent-dark);
}
body.light .filter-btn:hover {
  border-color: var(--accent-light);
  color: var(--accent-light);
}
.filter-btn.active {
  background: var(--accent-dark);
  border-color: var(--accent-dark);
  color: #fff;
}
body.light .filter-btn.active {
  background: var(--accent-light);
  border-color: var(--accent-light);
}

.sort-select {
  border: 1px solid var(--border-dark);
  background: var(--card-dark);
  color: var(--text-dark);
  padding: 6px 12px;
  border-radius: 10px;
  font-weight: 600;
  font-size: 13px;
  font-family: inherit;
  cursor: pointer;
}
body.light .sort-select {
  border-color: var(--border-light);
  background: var(--card-light);
  color: var(--text-light);
}


/* Sections */
.section{ max-width:var(--max); margin:20px auto 30px; padding:0 16px }
.section h2{
  margin:18px 0 12px; font-size:20px; letter-spacing:-.01em;
  display:flex; align-items:center; gap:10px;
  /* --- NEW: Sticky Headers --- */
  position: sticky;
  top: 61px; /* Height of the header */
  padding: 8px 0;
  background: var(--bg-dark);
  z-index: 10;
}
body.light .section h2 { background: var(--bg-light); }

/* Tool list */
.tools{ display:flex; flex-direction:column; gap:16px; }
.tool-card{
  background:var(--card-dark); color:inherit;
  border:1px solid var(--border-dark);
  border-radius:var(--radius); padding:14px 16px;
  box-shadow:var(--shadow);
  transition: all .25s ease;
  cursor: pointer; /* To indicate it's clickable */
}
.tool-card:hover{ transform:translateY(-3px); box-shadow:0 16px 38px rgba(0,0,0,.28) }
body.light .tool-card{ background:var(--card-light); border-color:var(--border-light) }

.tool-header {
  display: flex;
  align-items: flex-start;
  gap: 14px;
}

.tool-icon{
  width:52px; height:52px; border-radius:12px; flex:none;
  background:color-mix(in oklab, currentColor 5%, transparent);
  border:1px solid color-mix(in oklab, currentColor 15%, transparent);
  display:flex; align-items:center; justify-content:center; overflow:hidden;
}
.tool-icon img{ width:80%; height:80%; object-fit:contain; display:block }
.tool-fallback{
  width:100%; height:100%; display:flex; align-items:center; justify-content:center;
  font-weight:800; color:#fff; letter-spacing:.2px; background:linear-gradient(135deg, #1d4ed8, #22c55e);
}

.tool-content{ flex:1 1 auto; min-width:0 }
.tool-content h3{ margin:0 0 4px; font-size:17px }
.tool-desc{ margin:0 0 10px; color:var(--muted-dark); font-size:14.5px }
body.light .tool-desc{ color:var(--muted-light) }

/* --- NEW: Styles for Expandable Detail View --- */
.tool-details {
  display: grid;
  grid-template-rows: 0fr; /* Start collapsed */
  transition: grid-template-rows 0.35s ease-out;
}
.tool-card.is-expanded .tool-details {
  grid-template-rows: 1fr; /* Expand */
}
.tool-details-inner {
  overflow: hidden;
}
.details-content {
  padding-top: 14px;
  border-top: 1px solid var(--border-dark);
  margin-top: 12px;
  font-size: 14px;
}
body.light .details-content { border-color: var(--border-light); }
.detail-item {
  margin-bottom: 8px;
  color: var(--muted-dark);
}
body.light .detail-item { color: var(--muted-light); }
.detail-item strong {
  color: var(--text-dark);
  font-weight: 600;
}
body.light .detail-item strong { color: var(--text-light); }
/* --- End New Styles --- */


.tool-actions{ display:flex; align-items:center; gap:10px; flex-wrap:wrap }
.tag{
  font-size:12px; font-weight:700; border-radius:999px; padding:3px 8px; letter-spacing:.2px;
  border:1px solid transparent; user-select:none; text-transform: capitalize;
}
.most{ background:#34c759; color:#fff }
.common{ background:#ff9f0a; color:#fff }
.oss{ background:#5856d6; color:#fff }
.paid{ background:#ff375f; color:#fff }
.emerging{ background:#00c7be; color:#001a1a; border-color:#00c7be; }
.beginner-friendly { background: #34c759; color: #fff; }
.intermediate { background: #ff9f0a; color: #fff; }
.steep { background: #ff375f; color: #fff; }

.visit {
  display: inline-flex; align-items: center; gap: 6px;
  border: 1px solid transparent; border-radius: 10px;
  padding: 8px 12px; font-size: 14px; font-weight: 600;
  cursor: pointer; text-decoration: none;
  transition: all .2s ease;
}
.visit:hover { transform: translateY(-2px); }
.visit { background: var(--accent-dark); color: #fff; }
.visit:hover { filter: brightness(.92); }
body.light .visit { background: color-mix(in oklab, var(--accent-light) 15%, transparent); color: var(--accent-light); }
body.light .visit:hover { background: color-mix(in oklab, var(--accent-light) 22%, transparent); }

/* No results message */
.no-results {
  text-align: center; padding: 40px 16px;
  color: var(--muted-dark); display: none;
}
body.light .no-results { color: var(--muted-light); }
.no-results h3 { font-size: 18px; margin: 0 0 8px; }

/* Footer */
.site-footer{
  border-top:1px solid var(--border-dark); color:var(--muted-dark);
  text-align:center; padding:22px 16px; margin-top:28px;
}
body.light .site-footer{ border-top-color:var(--border-light); color:var(--muted-light) }

/* Mobile */
@media (max-width:640px){
  .tool-header { flex-direction: column; align-items: flex-start; }
  .tool-actions{ gap:8px }
  .search{ display: none; }
  .brand .title { font-size: 16px; }
  .filter-group { justify-content: center; }
  .filter-group-label { display: none; }
  .sort-group { width: 100%; justify-content: center; }
  .sort-select { flex-grow: 1; text-align: center; }
}